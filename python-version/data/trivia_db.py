"""Trivia database for P-Type.

Contains trivia questions and bonus item definitions, plus helper methods
to select questions and items.
"""
import random
from pathlib import Path
from typing import Optional
from pytablericons.tabler_icons import OutlineIcon

try:
    import yaml
except ImportError:
    yaml = None
    print("Warning: PyYAML not found. Trivia will not load.")

from core.types import (
    GameMode,
    ProgrammingLanguage,
    TriviaCategory,
    TriviaQuestion,
    BonusItem,
)


class TriviaDatabase:
    """Comprehensive trivia question database"""
    
    _trivia_data = None
    
    @classmethod
    def _load_trivia(cls):
        """Load trivia from YAML file."""
        if cls._trivia_data is not None:
            return cls._trivia_data
        
        if yaml is None:
            cls._trivia_data = {}
            return cls._trivia_data
        
        trivia_file = Path(__file__).parent / 'trivia.yaml'
        if not trivia_file.exists():
            cls._trivia_data = {}
            return cls._trivia_data
        
        with open(trivia_file, 'r', encoding='utf-8') as f:
            raw_data = yaml.safe_load(f)
        
        # Convert YAML format to TriviaQuestion objects
        cls._trivia_data = {}
        
        # Map YAML keys to game keys
        key_mapping = {
            'python': ProgrammingLanguage.PYTHON.value,
            'javascript': ProgrammingLanguage.JAVASCRIPT.value,
            'java': ProgrammingLanguage.JAVA.value,
            'csharp': ProgrammingLanguage.CSHARP.value,
            'cplusplus': ProgrammingLanguage.CPLUSPLUS.value,
            'css': ProgrammingLanguage.CSS.value,
            'html': ProgrammingLanguage.HTML.value,
            'pop_culture': TriviaCategory.POP_CULTURE.value,
            'sports': TriviaCategory.SPORTS.value,
            'history': TriviaCategory.HISTORY.value,
        }
        
        for yaml_key, difficulties in raw_data.items():
            game_key = key_mapping.get(yaml_key, yaml_key)
            cls._trivia_data[game_key] = {}
            
            for difficulty, questions in difficulties.items():
                cls._trivia_data[game_key][difficulty] = [
                    TriviaQuestion(
                        q['question'],
                        q['options'],
                        q['correct'],
                        difficulty,
                        yaml_key
                    )
                    for q in questions
                ]
        
        return cls._trivia_data

    # Legacy format for backwards compatibility (will load from YAML)
    TRIVIA_QUESTIONS = None  # Will be populated by _load_trivia()
    
    # Old hardcoded data removed - now loads from trivia.yaml
    _LEGACY_QUESTIONS = {
        TriviaCategory.POP_CULTURE.value: {
            'beginner': [
                TriviaQuestion("Which movie features the line 'May the Force be with you'?",
                               ["Star Trek", "Star Wars", "Avatar"], 1, "beginner", "pop_culture"),
                TriviaQuestion("What social media platform has a bird as its logo?",
                               ["Facebook", "Twitter", "TikTok"], 1, "beginner", "pop_culture"),
                TriviaQuestion("Who played Iron Man in the Marvel movies?",
                               ["Chris Evans", "Robert Downey Jr.", "Chris Hemsworth"], 1, "beginner", "pop_culture"),
                TriviaQuestion("What streaming service is known for 'Stranger Things'?",
                               ["Hulu", "Netflix", "Disney+"], 1, "beginner", "pop_culture"),
                TriviaQuestion("Which superhero is known as 'The Dark Knight'?",
                               ["Superman", "Batman", "Spider-Man"], 1, "beginner", "pop_culture"),
                TriviaQuestion("What is the name of Harry Potter's owl?",
                               ["Hedwig", "Errol", "Pigwidgeon"], 0, "beginner", "pop_culture"),
                TriviaQuestion("Which video game features a plumber named Mario?",
                               ["Sonic", "Super Mario", "Zelda"], 1, "beginner", "pop_culture"),
                TriviaQuestion("What company makes the iPhone?",
                               ["Samsung", "Apple", "Google"], 1, "beginner", "pop_culture"),
                TriviaQuestion("What is the name of the main character in The Legend of Zelda?",
                               ["Zelda", "Link", "Ganon"], 1, "beginner", "pop_culture"),
                TriviaQuestion("Which console is made by Sony?",
                               ["Xbox", "PlayStation", "Switch"], 1, "beginner", "pop_culture"),
                TriviaQuestion("What does 'www' stand for?",
                               ["World Wide Web", "Web World Wide", "Wide Web World"], 0, "beginner", "pop_culture"),
                TriviaQuestion("Which company created Minecraft?",
                               ["Epic Games", "Mojang", "Valve"], 1, "beginner", "pop_culture"),
            ],
            'intermediate': [
                TriviaQuestion("Which band released the album 'Bohemian Rhapsody'?",
                               ["The Beatles", "Queen", "The Rolling Stones"], 1, "intermediate", "pop_culture"),
                TriviaQuestion("What is the highest-grossing film of all time?",
                               ["Titanic", "Avatar", "Avengers: Endgame"], 1, "intermediate", "pop_culture"),
                TriviaQuestion("Who directed the movie 'Inception'?",
                               ["Steven Spielberg", "Christopher Nolan", "Quentin Tarantino"], 1, "intermediate", "pop_culture"),
            ],
            'advanced': [
                TriviaQuestion("Which film won the first Academy Award for Best Picture?",
                               ["Wings", "Sunrise", "The Jazz Singer"], 0, "advanced", "pop_culture"),
                TriviaQuestion("What year did MTV launch?",
                               ["1980", "1981", "1982"], 1, "advanced", "pop_culture"),
            ]
        },

        TriviaCategory.SPORTS.value: {
            'beginner': [
                TriviaQuestion("How many players are on a basketball team?",
                               ["4", "5", "6"], 1, "beginner", "sports"),
                TriviaQuestion("What sport is played at Wimbledon?",
                               ["Golf", "Tennis", "Cricket"], 1, "beginner", "sports"),
                TriviaQuestion("How often are the Olympics held?",
                               ["Every 2 years", "Every 4 years", "Every 5 years"], 1, "beginner", "sports"),
            ],
            'intermediate': [],
            'advanced': []
        },

        TriviaCategory.HISTORY.value: {
            'beginner': [
                TriviaQuestion("In which year did World War II end?",
                               ["1944", "1945", "1946"], 1, "beginner", "history"),
                TriviaQuestion("Who was the first President of the United States?",
                               ["Thomas Jefferson", "George Washington", "John Adams"], 1, "beginner", "history"),
            ],
            'intermediate': [],
            'advanced': []
        },

        # ==================== PYTHON TRIVIA ====================
        ProgrammingLanguage.PYTHON.value: {
            'beginner': [
                TriviaQuestion("What keyword is used to define a function in Python?",
                               ["function", "def", "func"], 1, "beginner", "Python"),
                TriviaQuestion("Which of these is NOT a Python data type?",
                               ["int", "string", "float"], 1, "beginner", "Python"),
                TriviaQuestion("What symbol starts a comment in Python?",
                               ["//", "#", "/*"], 1, "beginner", "Python"),
                TriviaQuestion("How do you print 'Hello' in Python?",
                               ["echo('Hello')", "print('Hello')", "console.log('Hello')"], 1, "beginner", "Python"),
                TriviaQuestion("What does 'len()' return?",
                               ["Length of object", "Last element", "Type of object"], 0, "beginner", "Python"),
                TriviaQuestion("Which operator is used for exponentiation?",
                               ["^", "**", "pow"], 1, "beginner", "Python"),
                TriviaQuestion("What is the correct file extension for Python files?",
                               [".py", ".python", ".pt"], 0, "beginner", "Python"),
                TriviaQuestion("Which keyword is used for loops?",
                               ["loop", "for", "repeat"], 1, "beginner", "Python"),
                TriviaQuestion("How do you create a list?",
                               ["[]", "{}", "()"], 0, "beginner", "Python"),
                TriviaQuestion("What is the output of: 5 // 2?",
                               ["2", "2.5", "3"], 0, "beginner", "Python"),
                TriviaQuestion("Which keyword imports modules?",
                               ["include", "import", "require"], 1, "beginner", "Python"),
                TriviaQuestion("What does 'str()' do?",
                               ["Converts to string", "Returns string length", "Sorts string"], 0, "beginner", "Python"),
                TriviaQuestion("How do you start an if statement?",
                               ["if x:", "if (x)", "if x then"], 0, "beginner", "Python"),
                TriviaQuestion("What is None in Python?",
                               ["Empty string", "Null value", "Zero"], 1, "beginner", "Python"),
                TriviaQuestion("Which creates a dictionary?",
                               ["{}", "[]", "dict()"], 0, "beginner", "Python"),
            ],
            'intermediate': [
                TriviaQuestion("What does PEP stand for in Python?",
                               ["Python Enhancement Proposal", "Python Execution Protocol", "Python Extension Package"], 0, "intermediate", "Python"),
                TriviaQuestion("What is a list comprehension?",
                               ["A loop", "Compact way to create lists", "A function"], 1, "intermediate", "Python"),
                TriviaQuestion("What does *args do?",
                               ["Multiplies arguments", "Variable arguments", "Pointer to args"], 1, "intermediate", "Python"),
                TriviaQuestion("What is a decorator in Python?",
                               ["Design pattern", "Function modifier", "Class method"], 1, "intermediate", "Python"),
                TriviaQuestion("Which is mutable: tuple or list?",
                               ["Tuple", "List", "Both"], 1, "intermediate", "Python"),
                TriviaQuestion("What does 'with' statement do?",
                               ["Context manager", "Loop modifier", "Import helper"], 0, "intermediate", "Python"),
                TriviaQuestion("What is the difference between '==' and 'is'?",
                               ["No difference", "== value, is identity", "is is faster"], 1, "intermediate", "Python"),
                TriviaQuestion("What is __init__?",
                               ["Class initializer", "Import function", "Main function"], 0, "intermediate", "Python"),
                TriviaQuestion("What does lambda create?",
                               ["Anonymous function", "New class", "List"], 0, "intermediate", "Python"),
                TriviaQuestion("What is a generator?",
                               ["Function returning iterator", "Random number creator", "Class method"], 0, "intermediate", "Python"),
                TriviaQuestion("What does yield do?",
                               ["Returns value but remembers state", "Stops function", "Raises error"], 0, "intermediate", "Python"),
                TriviaQuestion("What is self in Python?",
                               ["Instance reference", "Class reference", "Module reference"], 0, "intermediate", "Python"),
                TriviaQuestion("What does **kwargs represent?",
                               ["Power operator", "Keyword arguments", "Dictionary unpacking"], 1, "intermediate", "Python"),
                TriviaQuestion("What is a set in Python?",
                               ["Unordered unique collection", "Ordered list", "Key-value pairs"], 0, "intermediate", "Python"),
                TriviaQuestion("What does map() return?",
                               ["List", "Iterator", "Generator"], 1, "intermediate", "Python"),
            ],
            'advanced': [
                TriviaQuestion("What is the Global Interpreter Lock (GIL)?",
                               ["Security feature", "Thread synchronization mechanism", "Garbage collector"], 1, "advanced", "Python"),
                TriviaQuestion("What is metaclass in Python?",
                               ["Class of a class", "Abstract class", "Interface"], 0, "advanced", "Python"),
                TriviaQuestion("What does __slots__ do?",
                               ["Limits attributes", "Creates properties", "Defines methods"], 0, "advanced", "Python"),
                TriviaQuestion("What is monkey patching?",
                               ["Debugging technique", "Runtime modification", "Testing method"], 1, "advanced", "Python"),
                TriviaQuestion("What is the difference between deepcopy and copy?",
                               ["No difference", "deepcopy copies nested objects", "copy is faster"], 1, "advanced", "Python"),
                TriviaQuestion("What is asyncio used for?",
                               ["Asynchronous programming", "Threading", "Multiprocessing"], 0, "advanced", "Python"),
                TriviaQuestion("What does __call__ method do?",
                               ["Makes instance callable", "Constructor", "Destructor"], 0, "advanced", "Python"),
                TriviaQuestion("What is descriptor protocol?",
                               ["Attribute access control", "Class inheritance", "Module import"], 0, "advanced", "Python"),
                TriviaQuestion("What does @property decorator do?",
                               ["Creates managed attribute", "Makes method static", "Adds documentation"], 0, "advanced", "Python"),
                TriviaQuestion("What is the purpose of __new__?",
                               ["Creates instance", "Initializes instance", "Destroys instance"], 0, "advanced", "Python"),
                TriviaQuestion("What is MRO in Python?",
                               ["Method Resolution Order", "Module Reference Object", "Memory Read Operation"], 0, "advanced", "Python"),
                TriviaQuestion("What does functools.wraps do?",
                               ["Preserves function metadata", "Creates wrapper", "Caches results"], 0, "advanced", "Python"),
                TriviaQuestion("What is context manager protocol?",
                               ["__enter__ and __exit__", "__init__ and __del__", "__get__ and __set__"], 0, "advanced", "Python"),
                TriviaQuestion("What is the difference between classmethod and staticmethod?",
                               ["classmethod receives class", "No difference", "staticmethod is faster"], 0, "advanced", "Python"),
                TriviaQuestion("What does __getattr__ do?",
                               ["Called when attribute not found", "Gets all attributes", "Sets attribute"], 0, "advanced", "Python"),
            ]
        },

        # ==================== JAVASCRIPT TRIVIA ====================
        ProgrammingLanguage.JAVASCRIPT.value: {
            'beginner': [
                TriviaQuestion("Which keyword declares a variable?",
                               ["var", "let", "const"], 0, "beginner", "JavaScript"),
                TriviaQuestion("How do you write a comment?",
                               ["#", "//", "/*"], 1, "beginner", "JavaScript"),
                TriviaQuestion("What logs to console?",
                               ["print()", "console.log()", "echo()"], 1, "beginner", "JavaScript"),
                TriviaQuestion("Which creates an array?",
                               ["[]", "{}", "()"], 0, "beginner", "JavaScript"),
                TriviaQuestion("What is NaN?",
                               ["Not a Number", "Null and None", "New Array Number"], 0, "beginner", "JavaScript"),
                TriviaQuestion("Which is a string?",
                               ["'hello'", "hello", "[hello]"], 0, "beginner", "JavaScript"),
                TriviaQuestion("What does typeof return?",
                               ["Data type", "Value", "Variable name"], 0, "beginner", "JavaScript"),
                TriviaQuestion("How do you declare a function?",
                               ["function name()", "def name()", "func name()"], 0, "beginner", "JavaScript"),
                TriviaQuestion("What is null?",
                               ["Empty value", "Zero", "False"], 0, "beginner", "JavaScript"),
                TriviaQuestion("Which loops through arrays?",
                               ["loop", "for", "each"], 1, "beginner", "JavaScript"),
                TriviaQuestion("What is the correct syntax for if?",
                               ["if x:", "if (x)", "if x then"], 1, "beginner", "JavaScript"),
                TriviaQuestion("Which operator means 'not equal'?",
                               ["!=", "<>", "=/="], 0, "beginner", "JavaScript"),
                TriviaQuestion("What does '===' check?",
                               ["Value only", "Type and value", "Reference"], 1, "beginner", "JavaScript"),
                TriviaQuestion("How do you add to array?",
                               ["push()", "add()", "append()"], 0, "beginner", "JavaScript"),
                TriviaQuestion("What is undefined?",
                               ["Declared but not assigned", "Null value", "Error"], 0, "beginner", "JavaScript"),
            ],
            'intermediate': [
                TriviaQuestion("What is the difference between == and ===?",
                               ["No difference", "=== checks type and value", "== is faster"], 1, "intermediate", "JavaScript"),
                TriviaQuestion("What is a callback?",
                               ["Function passed as argument", "Return value", "Loop condition"], 0, "intermediate", "JavaScript"),
                TriviaQuestion("What does 'this' refer to?",
                               ["Current object", "Parent object", "Global object"], 0, "intermediate", "JavaScript"),
                TriviaQuestion("What is a Promise?",
                               ["Async operation result", "Variable type", "Function type"], 0, "intermediate", "JavaScript"),
                TriviaQuestion("What does async/await do?",
                               ["Handles promises", "Creates threads", "Pauses execution"], 0, "intermediate", "JavaScript"),
                TriviaQuestion("What is event bubbling?",
                               ["Event propagation upward", "Event prevention", "Event timing"], 0, "intermediate", "JavaScript"),
                TriviaQuestion("What is closure?",
                               ["Function with outer scope access", "Class method", "Loop type"], 0, "intermediate", "JavaScript"),
                TriviaQuestion("What does map() do?",
                               ["Transforms array elements", "Filters array", "Sorts array"], 0, "intermediate", "JavaScript"),
                TriviaQuestion("What is destructuring?",
                               ["Unpacking values", "Breaking objects", "Error handling"], 0, "intermediate", "JavaScript"),
                TriviaQuestion("What is spread operator?",
                               ["...", "***", "~~~"], 0, "intermediate", "JavaScript"),
                TriviaQuestion("What does filter() return?",
                               ["New filtered array", "Boolean", "Index"], 0, "intermediate", "JavaScript"),
                TriviaQuestion("What is arrow function?",
                               ["() =>", "function()", "func()"], 0, "intermediate", "JavaScript"),
                TriviaQuestion("What is hoisting?",
                               ["Variable/function moved to top", "DOM manipulation", "Event handling"], 0, "intermediate", "JavaScript"),
                TriviaQuestion("What does reduce() do?",
                               ["Reduces array to single value", "Removes elements", "Sorts array"], 0, "intermediate", "JavaScript"),
                TriviaQuestion("What is prototype?",
                               ["Object inheritance mechanism", "Variable type", "Function type"], 0, "intermediate", "JavaScript"),
            ],
            'advanced': [
                TriviaQuestion("What is event loop?",
                               ["Handles async operations", "Loops through events", "Event counter"], 0, "advanced", "JavaScript"),
                TriviaQuestion("What is the difference between call and apply?",
                               ["Arguments format", "No difference", "Return type"], 0, "advanced", "JavaScript"),
                TriviaQuestion("What is Symbol?",
                               ["Unique identifier", "Math operator", "Variable type"], 0, "advanced", "JavaScript"),
                TriviaQuestion("What is WeakMap?",
                               ["Map with weak references", "Weak variable storage", "Performance map"], 0, "advanced", "JavaScript"),
                TriviaQuestion("What is Proxy?",
                               ["Object intercept operations", "Network proxy", "Variable proxy"], 0, "advanced", "JavaScript"),
                TriviaQuestion("What is generator function?",
                               ["Pausable function", "Random generator", "Array creator"], 0, "advanced", "JavaScript"),
                TriviaQuestion("What does Object.freeze() do?",
                               ["Makes object immutable", "Stops execution", "Deletes object"], 0, "advanced", "JavaScript"),
                TriviaQuestion("What is Reflect API?",
                               ["Object operation methods", "DOM reflection", "Type checking"], 0, "advanced", "JavaScript"),
                TriviaQuestion("What is the difference between bind and apply?",
                               ["bind returns function", "No difference", "apply is faster"], 0, "advanced", "JavaScript"),
                TriviaQuestion("What is module pattern?",
                               ["Encapsulation technique", "Import method", "Class pattern"], 0, "advanced", "JavaScript"),
                TriviaQuestion("What is currying?",
                               ["Partial function application", "Function optimization", "Array method"], 0, "advanced", "JavaScript"),
                TriviaQuestion("What is memoization?",
                               ["Caching function results", "Memory management", "Variable storage"], 0, "advanced", "JavaScript"),
                TriviaQuestion("What is the temporal dead zone?",
                               ["Time before variable initialization", "Async zone", "Error zone"], 0, "advanced", "JavaScript"),
                TriviaQuestion("What is the difference between microtask and macrotask?",
                               ["Queue priority", "No difference", "Execution speed"], 0, "advanced", "JavaScript"),
                TriviaQuestion("What is the prototype chain?",
                               ["Object inheritance hierarchy", "Function chain", "Method chain"], 0, "advanced", "JavaScript"),
            ]
        },

        # ==================== JAVA TRIVIA ====================
        ProgrammingLanguage.JAVA.value: {
            'beginner': [
                TriviaQuestion("What is the main method signature?",
                               ["public static void main(String[])", "void main()", "public main()"], 0, "beginner", "Java"),
                TriviaQuestion("Which keyword creates a class?",
                               ["class", "Class", "new"], 0, "beginner", "Java"),
                TriviaQuestion("What is the correct way to declare a variable?",
                               ["int x;", "x int;", "var x;"], 0, "beginner", "Java"),
                TriviaQuestion("What does 'public' mean?",
                               ["Accessible everywhere", "Private to class", "Protected"], 0, "beginner", "Java"),
                TriviaQuestion("How do you print in Java?",
                               ["print()", "System.out.println()", "console.log()"], 1, "beginner", "Java"),
                TriviaQuestion("What is a String?",
                               ["Sequence of characters", "Number type", "Boolean"], 0, "beginner", "Java"),
                TriviaQuestion("Which creates an array?",
                               ["int[]", "array<int>", "Array[int]"], 0, "beginner", "Java"),
                TriviaQuestion("What is 'new' keyword?",
                               ["Creates object", "Declares variable", "Imports class"], 0, "beginner", "Java"),
                TriviaQuestion("What does 'void' mean?",
                               ["No return value", "Empty", "Null"], 0, "beginner", "Java"),
                TriviaQuestion("What is inheritance?",
                               ["Class extends another", "Variable type", "Method type"], 0, "beginner", "Java"),
                TriviaQuestion("Which loops a specific number of times?",
                               ["for", "while", "do-while"], 0, "beginner", "Java"),
                TriviaQuestion("What is a constructor?",
                               ["Initializes object", "Main method", "Destructor"], 0, "beginner", "Java"),
                TriviaQuestion("What does 'static' mean?",
                               ["Belongs to class", "Cannot change", "Private"], 0, "beginner", "Java"),
                TriviaQuestion("What is null?",
                               ["No object reference", "Zero", "Empty string"], 0, "beginner", "Java"),
                TriviaQuestion("Which keyword extends a class?",
                               ["extends", "inherit", "super"], 0, "beginner", "Java"),
            ],
            'intermediate': [
                TriviaQuestion("What is the difference between ArrayList and LinkedList?",
                               ["ArrayList faster random access", "No difference", "LinkedList always better"], 0, "intermediate", "Java"),
                TriviaQuestion("What is an interface?",
                               ["Contract for classes", "Abstract class", "Variable type"], 0, "intermediate", "Java"),
                TriviaQuestion("What does 'final' keyword do?",
                               ["Prevents modification", "Makes static", "Makes public"], 0, "intermediate", "Java"),
                TriviaQuestion("What is polymorphism?",
                               ["Multiple forms", "Many classes", "Many methods"], 0, "intermediate", "Java"),
                TriviaQuestion("What is encapsulation?",
                               ["Data hiding", "Class inheritance", "Method overriding"], 0, "intermediate", "Java"),
                TriviaQuestion("What is method overloading?",
                               ["Same name different parameters", "Override parent method", "Multiple returns"], 0, "intermediate", "Java"),
                TriviaQuestion("What is method overriding?",
                               ["Redefine parent method", "Same method twice", "Multiple parameters"], 0, "intermediate", "Java"),
                TriviaQuestion("What is abstract class?",
                               ["Cannot instantiate", "Final class", "Interface"], 0, "intermediate", "Java"),
                TriviaQuestion("What does 'super' refer to?",
                               ["Parent class", "Current class", "Sub class"], 0, "intermediate", "Java"),
                TriviaQuestion("What is a package?",
                               ["Group of classes", "Variable type", "Method type"], 0, "intermediate", "Java"),
                TriviaQuestion("What is exception handling?",
                               ["Managing errors", "Preventing errors", "Logging errors"], 0, "intermediate", "Java"),
                TriviaQuestion("What is try-catch?",
                               ["Error handling block", "Loop type", "Conditional"], 0, "intermediate", "Java"),
                TriviaQuestion("What is garbage collection?",
                               ["Automatic memory management", "Manual cleanup", "Error handling"], 0, "intermediate", "Java"),
                TriviaQuestion("What is StringBuilder?",
                               ["Mutable string", "Immutable string", "String array"], 0, "intermediate", "Java"),
                TriviaQuestion("What is generics?",
                               ["Type parameters", "Generic method", "Default type"], 0, "intermediate", "Java"),
            ],
            'advanced': [
                TriviaQuestion("What is the difference between abstract class and interface in Java 8+?",
                               ["Both can have concrete methods", "Abstract classes only", "No difference"], 0, "advanced", "Java"),
                TriviaQuestion("What is lambda expression?",
                               ["Anonymous function", "Variable type", "Class type"], 0, "advanced", "Java"),
                TriviaQuestion("What is Stream API?",
                               ["Functional operations on collections", "I/O operations", "Threading"], 0, "advanced", "Java"),
                TriviaQuestion("What is Optional?",
                               ["Container for nullable values", "Required value", "Array type"], 0, "advanced", "Java"),
                TriviaQuestion("What is CompletableFuture?",
                               ["Async computation", "Thread pool", "Synchronous task"], 0, "advanced", "Java"),
                TriviaQuestion("What is annotation?",
                               ["Metadata", "Comment", "Variable"], 0, "advanced", "Java"),
                TriviaQuestion("What is reflection?",
                               ["Runtime class inspection", "Class mirror", "Type checking"], 0, "advanced", "Java"),
                TriviaQuestion("What is volatile keyword?",
                               ["Ensures visibility across threads", "Cannot change", "Fast access"], 0, "advanced", "Java"),
                TriviaQuestion("What is synchronized?",
                               ["Thread-safe execution", "Async execution", "Fast execution"], 0, "advanced", "Java"),
                TriviaQuestion("What is the difference between == and equals()?",
                               ["== checks reference, equals() value", "No difference", "== is faster"], 0, "advanced", "Java"),
                TriviaQuestion("What is functional interface?",
                               ["Interface with one abstract method", "Function type", "Lambda type"], 0, "advanced", "Java"),
                TriviaQuestion("What is method reference?",
                               ["Shorthand for lambda", "Method pointer", "Function call"], 0, "advanced", "Java"),
                TriviaQuestion("What is the diamond problem?",
                               ["Multiple inheritance ambiguity", "Generic issue", "Syntax error"], 0, "advanced", "Java"),
                TriviaQuestion("What is transient keyword?",
                               ["Skip serialization", "Temporary variable", "Thread-local"], 0, "advanced", "Java"),
                TriviaQuestion("What is the difference between Comparable and Comparator?",
                               ["Comparable natural, Comparator custom", "No difference", "Comparable is faster"], 0, "advanced", "Java"),
            ]
        },

        # ==================== C# TRIVIA ====================
        ProgrammingLanguage.CSHARP.value: {
            'beginner': [
                TriviaQuestion("What is the main method in C#?",
                               ["static void Main()", "void main()", "public Main()"], 0, "beginner", "C#"),
                TriviaQuestion("How do you print in C#?",
                               ["print()", "Console.WriteLine()", "echo()"], 1, "beginner", "C#"),
                TriviaQuestion("Which creates a class?",
                               ["class", "Class", "new"], 0, "beginner", "C#"),
                TriviaQuestion("What is a namespace?",
                               ["Container for classes", "Variable type", "Method type"], 0, "beginner", "C#"),
                TriviaQuestion("Which declares a variable?",
                               ["int x;", "x int;", "var x;"], 0, "beginner", "C#"),
                TriviaQuestion("What does 'using' do?",
                               ["Imports namespace", "Uses variable", "Loops"], 0, "beginner", "C#"),
                TriviaQuestion("What is string?",
                               ["Text data type", "Number type", "Boolean"], 0, "beginner", "C#"),
                TriviaQuestion("Which creates an array?",
                               ["int[]", "array<int>", "Array[int]"], 0, "beginner", "C#"),
                TriviaQuestion("What is null?",
                               ["No value", "Zero", "Empty"], 0, "beginner", "C#"),
                TriviaQuestion("What does 'public' mean?",
                               ["Accessible everywhere", "Private", "Protected"], 0, "beginner", "C#"),
                TriviaQuestion("What is a constructor?",
                               ["Initializes object", "Main method", "Destructor"], 0, "beginner", "C#"),
                TriviaQuestion("Which loops through arrays?",
                               ["foreach", "for", "while"], 0, "beginner", "C#"),
                TriviaQuestion("What is inheritance?",
                               ["Class derives from another", "Variable type", "Method"], 0, "beginner", "C#"),
                TriviaQuestion("What does 'void' mean?",
                               ["No return value", "Empty", "Null"], 0, "beginner", "C#"),
                TriviaQuestion("What is an interface?",
                               ["Contract", "Class", "Variable"], 0, "beginner", "C#"),
            ],
            'intermediate': [
                TriviaQuestion("What is LINQ?",
                               ["Language Integrated Query", "Link Query", "List Query"], 0, "intermediate", "C#"),
                TriviaQuestion("What is async/await?",
                               ["Asynchronous programming", "Thread creation", "Parallel execution"], 0, "intermediate", "C#"),
                TriviaQuestion("What is a delegate?",
                               ["Type-safe function pointer", "Variable type", "Class type"], 0, "intermediate", "C#"),
                TriviaQuestion("What is lambda expression?",
                               ["Anonymous function", "Loop", "Conditional"], 0, "intermediate", "C#"),
                TriviaQuestion("What does 'var' keyword do?",
                               ["Implicit typing", "Variable", "Value"], 0, "intermediate", "C#"),
                TriviaQuestion("What is property?",
                               ["Accessor for field", "Variable", "Method"], 0, "intermediate", "C#"),
                TriviaQuestion("What is event?",
                               ["Notification mechanism", "Method call", "Variable"], 0, "intermediate", "C#"),
                TriviaQuestion("What is extension method?",
                               ["Adds method to type", "Extended class", "Long method"], 0, "intermediate", "C#"),
                TriviaQuestion("What is nullable type?",
                               ["Can be null", "Cannot be null", "Always null"], 0, "intermediate", "C#"),
                TriviaQuestion("What is partial class?",
                               ["Split across files", "Incomplete class", "Abstract class"], 0, "intermediate", "C#"),
                TriviaQuestion("What is sealed class?",
                               ["Cannot inherit", "Final class", "Private class"], 0, "intermediate", "C#"),
                TriviaQuestion("What is generic?",
                               ["Type parameter", "General class", "Default type"], 0, "intermediate", "C#"),
                TriviaQuestion("What does 'override' do?",
                               ["Redefines virtual method", "Creates method", "Hides method"], 0, "intermediate", "C#"),
                TriviaQuestion("What is interface implementation?",
                               ["Implements contract", "Extends class", "Creates interface"], 0, "intermediate", "C#"),
                TriviaQuestion("What is exception handling?",
                               ["try-catch", "if-else", "switch"], 0, "intermediate", "C#"),
            ],
            'advanced': [
                TriviaQuestion("What is reflection?",
                               ["Runtime type inspection", "Class mirror", "Type checking"], 0, "advanced", "C#"),
                TriviaQuestion("What is Task<T>?",
                               ["Asynchronous operation", "Thread", "Process"], 0, "advanced", "C#"),
                TriviaQuestion("What is expression tree?",
                               ["Code as data", "Binary tree", "Syntax tree"], 0, "advanced", "C#"),
                TriviaQuestion("What is IDisposable?",
                               ["Resource cleanup interface", "Disposal method", "Garbage collection"], 0, "advanced", "C#"),
                TriviaQuestion("What is dependency injection?",
                               ["Design pattern", "Class inheritance", "Method injection"], 0, "advanced", "C#"),
                TriviaQuestion("What is covariance?",
                               ["Generic type variance", "Variable change", "Co-routine"], 0, "advanced", "C#"),
                TriviaQuestion("What is contravariance?",
                               ["Generic type variance", "Opposite variance", "Variable type"], 0, "advanced", "C#"),
                TriviaQuestion("What is yield return?",
                               ["Iterator pattern", "Return value", "Async return"], 0, "advanced", "C#"),
                TriviaQuestion("What is record type?",
                               ["Immutable reference type", "Database record", "Variable type"], 0, "advanced", "C#"),
                TriviaQuestion("What is pattern matching?",
                               ["Type and value checking", "String matching", "Regular expression"], 0, "advanced", "C#"),
                TriviaQuestion("What is deconstruction?",
                               ["Unpacking values", "Object destruction", "Decompiling"], 0, "advanced", "C#"),
                TriviaQuestion("What is local function?",
                               ["Function inside function", "Local variable", "Static function"], 0, "advanced", "C#"),
                TriviaQuestion("What is tuple?",
                               ["Multiple values", "Two values", "Triple value"], 0, "advanced", "C#"),
                TriviaQuestion("What is dynamic type?",
                               ["Runtime type resolution", "Fast type", "Variable type"], 0, "advanced", "C#"),
                TriviaQuestion("What is the difference between IEnumerable and IQueryable?",
                               ["IQueryable for databases", "No difference", "IEnumerable faster"], 0, "advanced", "C#"),
            ]
        },

        # ==================== C++ TRIVIA ====================
        ProgrammingLanguage.CPLUSPLUS.value: {
            'beginner': [
                TriviaQuestion("What is the main function in C++?",
                               ["int main()", "void main()", "main()"], 0, "beginner", "C++"),
                TriviaQuestion("How do you print in C++?",
                               ["print()", "cout <<", "printf()"], 1, "beginner", "C++"),
                TriviaQuestion("Which includes iostream?",
                               ["#include <iostream>", "import iostream", "using iostream"], 0, "beginner", "C++"),
                TriviaQuestion("What is a pointer?",
                               ["Address variable", "Number type", "String type"], 0, "beginner", "C++"),
                TriviaQuestion("What is a reference?",
                               ["Alias", "Pointer", "Variable"], 0, "beginner", "C++"),
                TriviaQuestion("Which creates a class?",
                               ["class", "Class", "struct"], 0, "beginner", "C++"),
                TriviaQuestion("What is inheritance?",
                               ["Class derives from another", "Variable type", "Function"], 0, "beginner", "C++"),
                TriviaQuestion("What does 'new' do?",
                               ["Allocates memory", "Declares variable", "Creates function"], 0, "beginner", "C++"),
                TriviaQuestion("What does 'delete' do?",
                               ["Frees memory", "Removes variable", "Deletes file"], 0, "beginner", "C++"),
                TriviaQuestion("What is namespace?",
                               ["Scope container", "Variable type", "Function type"], 0, "beginner", "C++"),
                TriviaQuestion("What is constructor?",
                               ["Initializes object", "Main function", "Destructor"], 0, "beginner", "C++"),
                TriviaQuestion("What is destructor?",
                               ["Cleanup object", "Constructs object", "Deletes class"], 0, "beginner", "C++"),
                TriviaQuestion("What is array?",
                               ["Collection of elements", "Single value", "Pointer"], 0, "beginner", "C++"),
                TriviaQuestion("What does 'const' mean?",
                               ["Cannot change", "Constant speed", "Constructor"], 0, "beginner", "C++"),
                TriviaQuestion("What is function overloading?",
                               ["Same name different parameters", "Override function", "Multiple returns"], 0, "beginner", "C++"),
            ],
            'intermediate': [
                TriviaQuestion("What is virtual function?",
                               ["Enables polymorphism", "Virtual memory", "Abstract function"], 0, "intermediate", "C++"),
                TriviaQuestion("What is pure virtual function?",
                               ["= 0 declaration", "Virtual only", "Pure function"], 0, "intermediate", "C++"),
                TriviaQuestion("What is abstract class?",
                               ["Has pure virtual function", "Cannot instantiate", "Final class"], 0, "intermediate", "C++"),
                TriviaQuestion("What is multiple inheritance?",
                               ["Inherit from multiple classes", "Many instances", "Multiple methods"], 0, "intermediate", "C++"),
                TriviaQuestion("What is template?",
                               ["Generic programming", "Design template", "Code template"], 0, "intermediate", "C++"),
                TriviaQuestion("What is STL?",
                               ["Standard Template Library", "String Template Library", "System Template Library"], 0, "intermediate", "C++"),
                TriviaQuestion("What is vector?",
                               ["Dynamic array", "Math vector", "Pointer array"], 0, "intermediate", "C++"),
                TriviaQuestion("What is iterator?",
                               ["Traverses container", "Counter", "Pointer"], 0, "intermediate", "C++"),
                TriviaQuestion("What is exception handling?",
                               ["try-catch", "if-else", "error check"], 0, "intermediate", "C++"),
                TriviaQuestion("What is operator overloading?",
                               ["Redefine operator", "Multiple operators", "Operator type"], 0, "intermediate", "C++"),
                TriviaQuestion("What is copy constructor?",
                               ["Creates copy", "Constructor copy", "Copy method"], 0, "intermediate", "C++"),
                TriviaQuestion("What is friend function?",
                               ["Access private members", "Friendly function", "Public function"], 0, "intermediate", "C++"),
                TriviaQuestion("What is static member?",
                               ["Belongs to class", "Cannot change", "Static memory"], 0, "intermediate", "C++"),
                TriviaQuestion("What is inline function?",
                               ["Expands at call site", "Inside function", "Line function"], 0, "intermediate", "C++"),
                TriviaQuestion("What is namespace std?",
                               ["Standard namespace", "String namespace", "System namespace"], 0, "intermediate", "C++"),
            ],
            'advanced': [
                TriviaQuestion("What is move semantics?",
                               ["Transfer ownership", "Move pointer", "Change location"], 0, "advanced", "C++"),
                TriviaQuestion("What is rvalue reference?",
                               ["&&", "*", "&"], 0, "advanced", "C++"),
                TriviaQuestion("What is smart pointer?",
                               ["Automatic memory management", "Smart variable", "Fast pointer"], 0, "advanced", "C++"),
                TriviaQuestion("What is unique_ptr?",
                               ["Single ownership", "Unique value", "Pointer type"], 0, "advanced", "C++"),
                TriviaQuestion("What is shared_ptr?",
                               ["Shared ownership", "Shared memory", "Pointer sharing"], 0, "advanced", "C++"),
                TriviaQuestion("What is weak_ptr?",
                               ["Non-owning reference", "Weak reference", "Weak pointer"], 0, "advanced", "C++"),
                TriviaQuestion("What is lambda expression?",
                               ["Anonymous function", "Greek letter", "Loop"], 0, "advanced", "C++"),
                TriviaQuestion("What is perfect forwarding?",
                               ["Preserve value category", "Perfect copy", "Forward reference"], 0, "advanced", "C++"),
                TriviaQuestion("What is variadic template?",
                               ["Variable template parameters", "Variable template", "Template array"], 0, "advanced", "C++"),
                TriviaQuestion("What is RAII?",
                               ["Resource Acquisition Is Initialization", "Reference And Instance", "Resource Allocation"], 0, "advanced", "C++"),
                TriviaQuestion("What is constexpr?",
                               ["Compile-time constant", "Const expression", "Expression"], 0, "advanced", "C++"),
                TriviaQuestion("What is decltype?",
                               ["Deduce type", "Declare type", "Type declaration"], 0, "advanced", "C++"),
                TriviaQuestion("What is auto keyword?",
                               ["Type deduction", "Automatic", "Auto variable"], 0, "advanced", "C++"),
                TriviaQuestion("What is type trait?",
                               ["Compile-time type info", "Type check", "Trait class"], 0, "advanced", "C++"),
                TriviaQuestion("What is SFINAE?",
                               ["Substitution Failure Is Not An Error", "Syntax Error", "Function Error"], 0, "advanced", "C++"),
            ]
        },

        # ==================== CSS TRIVIA ====================
        ProgrammingLanguage.CSS.value: {
            'beginner': [
                TriviaQuestion("What does CSS stand for?",
                               ["Cascading Style Sheets", "Computer Style Sheets", "Creative Style System"], 0, "beginner", "CSS"),
                TriviaQuestion("Which property changes text color?",
                               ["color", "text-color", "font-color"], 0, "beginner", "CSS"),
                TriviaQuestion("Which property changes background?",
                               ["background", "bg", "back-color"], 0, "beginner", "CSS"),
                TriviaQuestion("What is the syntax for class selector?",
                               [".classname", "#classname", "*classname"], 0, "beginner", "CSS"),
                TriviaQuestion("What is the syntax for ID selector?",
                               ["#idname", ".idname", "*idname"], 0, "beginner", "CSS"),
                TriviaQuestion("Which property changes font size?",
                               ["font-size", "text-size", "size"], 0, "beginner", "CSS"),
                TriviaQuestion("What does 'px' stand for?",
                               ["Pixels", "Points", "Percentage"], 0, "beginner", "CSS"),
                TriviaQuestion("Which property adds spacing inside?",
                               ["padding", "margin", "spacing"], 0, "beginner", "CSS"),
                TriviaQuestion("Which property adds spacing outside?",
                               ["margin", "padding", "border"], 0, "beginner", "CSS"),
                TriviaQuestion("What does 'display: none' do?",
                               ["Hides element", "Shows element", "Removes element"], 0, "beginner", "CSS"),
                TriviaQuestion("Which creates a border?",
                               ["border", "outline", "frame"], 0, "beginner", "CSS"),
                TriviaQuestion("What is hex color format?",
                               ["#RRGGBB", "rgb()", "color()"], 0, "beginner", "CSS"),
                TriviaQuestion("Which property makes text bold?",
                               ["font-weight", "text-bold", "bold"], 0, "beginner", "CSS"),
                TriviaQuestion("Which aligns text center?",
                               ["text-align: center", "align: center", "center: text"], 0, "beginner", "CSS"),
                TriviaQuestion("What is CSS comment syntax?",
                               ["/* */", "//", "#"], 0, "beginner", "CSS"),
            ],
            'intermediate': [
                TriviaQuestion("What is flexbox?",
                               ["Layout model", "Flexible box", "Grid system"], 0, "intermediate", "CSS"),
                TriviaQuestion("What is CSS Grid?",
                               ["2D layout system", "Table layout", "Flexbox"], 0, "intermediate", "CSS"),
                TriviaQuestion("What is media query?",
                               ["Responsive design rule", "Media file", "Query selector"], 0, "intermediate", "CSS"),
                TriviaQuestion("What is pseudo-class?",
                               ["Special state", "Fake class", "Class type"], 0, "intermediate", "CSS"),
                TriviaQuestion("What is pseudo-element?",
                               ["Style part of element", "Fake element", "Element type"], 0, "intermediate", "CSS"),
                TriviaQuestion("What does 'position: absolute' do?",
                               ["Position relative to parent", "Fixed position", "Normal flow"], 0, "intermediate", "CSS"),
                TriviaQuestion("What is z-index?",
                               ["Stacking order", "Zoom index", "Z position"], 0, "intermediate", "CSS"),
                TriviaQuestion("What is specificity?",
                               ["Selector priority", "Specific style", "CSS weight"], 0, "intermediate", "CSS"),
                TriviaQuestion("What is CSS variable?",
                               ["Custom property", "Variable value", "Dynamic value"], 0, "intermediate", "CSS"),
                TriviaQuestion("What is transition?",
                               ["Animated change", "Transform", "Translation"], 0, "intermediate", "CSS"),
                TriviaQuestion("What is animation?",
                               ["Keyframe animation", "Movement", "Transition"], 0, "intermediate", "CSS"),
                TriviaQuestion("What is transform?",
                               ["Modify element", "Transition", "Animation"], 0, "intermediate", "CSS"),
                TriviaQuestion("What does 'box-sizing: border-box' do?",
                               ["Include padding in width", "Add border", "Box model"], 0, "intermediate", "CSS"),
                TriviaQuestion("What is rem unit?",
                               ["Relative to root", "Relative to parent", "Responsive measure"], 0, "intermediate", "CSS"),
                TriviaQuestion("What is em unit?",
                               ["Relative to font-size", "Relative to root", "Exact measure"], 0, "intermediate", "CSS"),
            ],
            'advanced': [
                TriviaQuestion("What is CSS cascade?",
                               ["Style priority algorithm", "Waterfall effect", "Style chain"], 0, "advanced", "CSS"),
                TriviaQuestion("What is BEM methodology?",
                               ["Block Element Modifier", "Best Element Method", "Basic Element Model"], 0, "advanced", "CSS"),
                TriviaQuestion("What is CSS containment?",
                               ["Performance optimization", "Container property", "Box contain"], 0, "advanced", "CSS"),
                TriviaQuestion("What is will-change?",
                               ["Performance hint", "Future change", "Animation property"], 0, "advanced", "CSS"),
                TriviaQuestion("What is @supports?",
                               ["Feature query", "Support rule", "Browser check"], 0, "advanced", "CSS"),
                TriviaQuestion("What is @layer?",
                               ["Cascade layer", "Layer style", "Z-layer"], 0, "advanced", "CSS"),
                TriviaQuestion("What is container query?",
                               ["Query container size", "Container style", "Media query"], 0, "advanced", "CSS"),
                TriviaQuestion("What is :has() selector?",
                               ["Parent selector", "Has property", "Contain selector"], 0, "advanced", "CSS"),
                TriviaQuestion("What is aspect-ratio?",
                               ["Width to height ratio", "Screen ratio", "Image ratio"], 0, "advanced", "CSS"),
                TriviaQuestion("What is clamp()?",
                               ["Constrain value", "Clip value", "Calculate value"], 0, "advanced", "CSS"),
                TriviaQuestion("What is CSS Houdini?",
                               ["Low-level CSS API", "Magic trick", "CSS framework"], 0, "advanced", "CSS"),
                TriviaQuestion("What is @property?",
                               ["Custom property definition", "Property rule", "CSS variable"], 0, "advanced", "CSS"),
                TriviaQuestion("What is subgrid?",
                               ["Inherit parent grid", "Sub-layout", "Grid type"], 0, "advanced", "CSS"),
                TriviaQuestion("What is logical property?",
                               ["Writing-mode aware", "Logic style", "Property logic"], 0, "advanced", "CSS"),
                TriviaQuestion("What is color-mix()?",
                               ["Blend colors", "Mix function", "Color combination"], 0, "advanced", "CSS"),
            ]
        },

        # ==================== HTML TRIVIA ====================
        ProgrammingLanguage.HTML.value: {
            'beginner': [
                TriviaQuestion("What does HTML stand for?",
                               ["HyperText Markup Language", "High Tech Modern Language", "Home Tool Markup Language"], 0, "beginner", "HTML"),
                TriviaQuestion("Which tag creates a paragraph?",
                               ["<p>", "<para>", "<paragraph>"], 0, "beginner", "HTML"),
                TriviaQuestion("Which tag creates a link?",
                               ["<a>", "<link>", "<href>"], 0, "beginner", "HTML"),
                TriviaQuestion("Which attribute specifies link destination?",
                               ["href", "src", "link"], 0, "beginner", "HTML"),
                TriviaQuestion("Which tag creates a heading?",
                               ["<h1>", "<head>", "<heading>"], 0, "beginner", "HTML"),
                TriviaQuestion("Which tag inserts an image?",
                               ["<img>", "<image>", "<pic>"], 0, "beginner", "HTML"),
                TriviaQuestion("Which tag creates a list?",
                               ["<ul>", "<list>", "<li>"], 0, "beginner", "HTML"),
                TriviaQuestion("Which tag creates a table?",
                               ["<table>", "<tab>", "<tbl>"], 0, "beginner", "HTML"),
                TriviaQuestion("Which tag defines document body?",
                               ["<body>", "<content>", "<main>"], 0, "beginner", "HTML"),
                TriviaQuestion("Which tag contains metadata?",
                               ["<head>", "<meta>", "<info>"], 0, "beginner", "HTML"),
                TriviaQuestion("What is the correct DOCTYPE for HTML5?",
                               ["<!DOCTYPE html>", "<!DOCTYPE html5>", "<!HTML5>"], 0, "beginner", "HTML"),
                TriviaQuestion("Which tag creates a button?",
                               ["<button>", "<btn>", "<input>"], 0, "beginner", "HTML"),
                TriviaQuestion("Which tag creates a form?",
                               ["<form>", "<input>", "<field>"], 0, "beginner", "HTML"),
                TriviaQuestion("Which creates a line break?",
                               ["<br>", "<break>", "<lb>"], 0, "beginner", "HTML"),
                TriviaQuestion("Which creates a horizontal line?",
                               ["<hr>", "<line>", "<hl>"], 0, "beginner", "HTML"),
            ],
            'intermediate': [
                TriviaQuestion("What is semantic HTML?",
                               ["Meaningful tags", "SEO HTML", "Smart HTML"], 0, "intermediate", "HTML"),
                TriviaQuestion("Which tag is semantic for navigation?",
                               ["<nav>", "<menu>", "<navigation>"], 0, "intermediate", "HTML"),
                TriviaQuestion("Which tag is semantic for article?",
                               ["<article>", "<post>", "<content>"], 0, "intermediate", "HTML"),
                TriviaQuestion("What is the purpose of <section>?",
                               ["Thematic grouping", "Page section", "Division"], 0, "intermediate", "HTML"),
                TriviaQuestion("What is <aside> used for?",
                               ["Sidebar content", "Side menu", "Extra info"], 0, "intermediate", "HTML"),
                TriviaQuestion("What is data attribute?",
                               ["data-*", "attribute", "custom"], 0, "intermediate", "HTML"),
                TriviaQuestion("What is aria-label?",
                               ["Accessibility label", "Area label", "Label attribute"], 0, "intermediate", "HTML"),
                TriviaQuestion("What is role attribute?",
                               ["ARIA role", "User role", "Element role"], 0, "intermediate", "HTML"),
                TriviaQuestion("What is <canvas> used for?",
                               ["Draw graphics", "Container", "Canvas art"], 0, "intermediate", "HTML"),
                TriviaQuestion("What is <svg> used for?",
                               ["Vector graphics", "Save file", "Scalable view"], 0, "intermediate", "HTML"),
                TriviaQuestion("What is <video> tag?",
                               ["Embed video", "Video player", "Media file"], 0, "intermediate", "HTML"),
                TriviaQuestion("What is <audio> tag?",
                               ["Embed audio", "Audio player", "Sound file"], 0, "intermediate", "HTML"),
                TriviaQuestion("What is <picture> element?",
                               ["Responsive images", "Picture frame", "Image container"], 0, "intermediate", "HTML"),
                TriviaQuestion("What is <template> tag?",
                               ["Reusable content", "Page template", "Layout"], 0, "intermediate", "HTML"),
                TriviaQuestion("What is contenteditable?",
                               ["Makes element editable", "Content editor", "Edit mode"], 0, "intermediate", "HTML"),
            ],
            'advanced': [
                TriviaQuestion("What is Shadow DOM?",
                               ["Encapsulated DOM", "Hidden DOM", "Dark DOM"], 0, "advanced", "HTML"),
                TriviaQuestion("What are Web Components?",
                               ["Custom reusable elements", "Component library", "Web parts"], 0, "advanced", "HTML"),
                TriviaQuestion("What is <slot> in Shadow DOM?",
                               ["Content placeholder", "Slot machine", "Element slot"], 0, "advanced", "HTML"),
                TriviaQuestion("What is custom element?",
                               ["User-defined tag", "Custom tag", "Element type"], 0, "advanced", "HTML"),
                TriviaQuestion("What is <dialog> element?",
                               ["Modal dialog", "Conversation", "Dialog box"], 0, "advanced", "HTML"),
                TriviaQuestion("What is <details> element?",
                               ["Collapsible content", "Details info", "More info"], 0, "advanced", "HTML"),
                TriviaQuestion("What is lazy loading?",
                               ["loading='lazy'", "Slow loading", "Lazy load"], 0, "advanced", "HTML"),
                TriviaQuestion("What is preload?",
                               ["Early resource fetch", "Pre-load page", "Fast load"], 0, "advanced", "HTML"),
                TriviaQuestion("What is prefetch?",
                               ["Future resource fetch", "Fetch before", "Pre-cache"], 0, "advanced", "HTML"),
                TriviaQuestion("What is Service Worker?",
                               ["Background script", "Worker thread", "Service script"], 0, "advanced", "HTML"),
                TriviaQuestion("What is Web Manifest?",
                               ["PWA configuration", "Manifest file", "Web config"], 0, "advanced", "HTML"),
                TriviaQuestion("What is CSP?",
                               ["Content Security Policy", "Cross Site Protection", "Content Safety Protocol"], 0, "advanced", "HTML"),
                TriviaQuestion("What is CORS?",
                               ["Cross-Origin Resource Sharing", "Cross Origin Request", "Content Origin Resource"], 0, "advanced", "HTML"),
                TriviaQuestion("What is viewport meta tag?",
                               ["Responsive layout control", "View port", "Mobile viewport"], 0, "advanced", "HTML"),
                TriviaQuestion("What is Open Graph?",
                               ["Social media metadata", "Graph protocol", "Open source"], 0, "advanced", "HTML"),
            ]
        },
    }

    BONUS_ITEMS = [
        BonusItem(0, "Seeking Missiles", "Launch homing missiles to destroy 5 nearest enemies", OutlineIcon.ROCKET, 1, 1, 0.0),
        BonusItem(1, "Shield Boost", "Instant 50 shield points", OutlineIcon.SHIELD, 1, 1, 50.0),
        BonusItem(2, "Health Pack", "Restore 30 HP instantly", OutlineIcon.HEART, 1, 1, 30.0),
        BonusItem(3, "Time Freeze", "Freeze all enemies for 5 seconds", OutlineIcon.CLOCK_STOP, 300, 1, 0.0),
    ]

    @staticmethod
    def get_question(mode: GameMode, language: Optional[ProgrammingLanguage] = None, difficulty_level: int = 1) -> TriviaQuestion:
        # Load trivia data if not already loaded
        trivia_data = TriviaDatabase._load_trivia()
        
        if mode == GameMode.PROGRAMMING and language:
            category = language.value
        else:
            categories = [cat.value for cat in TriviaCategory]
            category = random.choice(categories)

        if difficulty_level <= 30:
            difficulty = 'beginner'
        elif difficulty_level <= 70:
            difficulty = 'intermediate'
        else:
            difficulty = 'advanced'

        questions = trivia_data.get(category, {})
        difficulty_questions = questions.get(difficulty, [])

        if not difficulty_questions:
            difficulty_questions = questions.get('beginner', [])

        if difficulty_questions:
            return random.choice(difficulty_questions)

        return TriviaQuestion("What is 2+2?", ["3", "4", "5"], 1, "beginner", "mathematics")

    @staticmethod
    def get_bonus_item() -> BonusItem:
        return random.choice(TriviaDatabase.BONUS_ITEMS)

    __all__ = ["TriviaDatabase"]

